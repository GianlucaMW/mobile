// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = "file:./dev.db"
}

model Usuario {
  id         Int          @id @default(autoincrement())
  nome       String
  senha      String
  Financeiro Financeiro[]
  Fin_pago   Fin_pago[]
  Documento  Documento[]
}


model Conta {
  id_conta  Int         @id
  nome      String
  Saldo     Decimal
  Documento Documento[]
}

model Produto {
  id_produto Int     @id
  cod_barras String
  descricao  String
  valor_v    Decimal
  valor_c    Decimal
  estoque    Int
}

model Documento {
  doc_controle  Int          @id
  usuarioId     Int
  id_cliente    Int
  valor         Decimal
  Financeiro    Financeiro[]
  user          Usuario      @relation(fields: [usuarioId], references: [id])
  conta         Conta        @relation(fields: [contaId_conta], references: [id_conta])
  contaId_conta Int
}

model cliente {
  cliente_id Int    @id @default(autoincrement())
  cpfCnpj    String @unique
  email      String
  nome       String
  telefone   String
  endereco   String
  numero     Int

  Financeiro Financeiro[]
}

model Financeiro {
  fin_id                Int        @id @default(autoincrement())
  Cliente_id            Int
  documentoDoc_controle Int
  usuarioId             Int
  dt_create             DateTime   @default(now())
  dt_vencimento         DateTime
  pago                  Boolean    @default(false)
  cancelado             Boolean    @default(false)
  valor                 Decimal
  documento             Documento  @relation(fields: [documentoDoc_controle], references: [doc_controle])
  user                  Usuario    @relation(fields: [usuarioId], references: [id])
  cliente               cliente    @relation(fields: [Cliente_id], references: [cliente_id])
  Fin_pago              Fin_pago[]
}

model Fin_pago {
  pago_id    Int        @id @default(autoincrement())
  Fin_id     Int
  usuarioId  Int
  dt_pago    DateTime   @default(now())
  val_desc   Decimal
  val_juros  Decimal
  financeiro Financeiro @relation(fields: [Fin_id], references: [fin_id])
  user       Usuario    @relation(fields: [usuarioId], references: [id])
}


model Movimentacao {
  mov_id     Int @id @default(autoincrement())
  descricao  String
  entrada    Boolean
  saida      Boolean
  quantidade Int
}