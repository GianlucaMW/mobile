// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = "file:./dev.db"
}

model Usuario {
  id         Int          @id @default(autoincrement())
  nome       String
  senha      String
  Financeiro Financeiro[]
  Documento  Documento[]
}

model Conta {
  id_conta Int     @id
  nome     String
  Saldo    Decimal
}

model Produto {
  id_produto Int        @id
  cod_barras String
  descricao  String
  valor_v    Decimal
  valor_c    Decimal
  estoque    Int
  docItens   docItens[]
}

model Documento {
  doc_controle Int          @id @default(autoincrement())
  descricao    String
  usuarioId    Int
  id_cliente   Int
  saida        Boolean      @default(true)
  data         DateTime     @default(now())
  valor        Decimal
  Pag_id       Int
  user         Usuario      @relation(fields: [usuarioId], references: [id])
  pag_id       forma_pag    @relation(fields: [Pag_id], references: [pag_id])
  Financeiro   Financeiro[]
}

model docItens {
  item       Int      @id @default(autoincrement())
  Id_produto Int
  data       DateTime
  valor_un   Decimal
  valor_to   Decimal
  quantidade Int
  produto    Produto  @relation(fields: [Id_produto], references: [id_produto])
}

model cliente {
  cliente_id Int    @id @default(autoincrement())
  cpfCnpj    String @unique
  email      String
  nome       String
  telefone   String
  endereco   String
  numero     Int

  Financeiro Financeiro[]
}

model Financeiro {
  fin_id          Int        @id @default(autoincrement())
  Cliente_id      Int
  Doc_controle    Int?
  usuarioId       Int
  forma_pagPag_id Int
  debCred         Boolean
  dt_create       DateTime   @default(now())
  dt_vencimento   DateTime
  cancelado       Boolean    @default(false)
  valor           Decimal
  pago            Boolean
  dt_pago         DateTime?
  documento       Documento? @relation(fields: [Doc_controle], references: [doc_controle])
  user            Usuario    @relation(fields: [usuarioId], references: [id])
  cliente         cliente    @relation(fields: [Cliente_id], references: [cliente_id])
  forma_pag       forma_pag  @relation(fields: [forma_pagPag_id], references: [pag_id])
}

model forma_pag {
  pag_id     Int          @id @default(autoincrement())
  prazo      Boolean      @default(false)
  descricao  String
  Financeiro Financeiro[]
  //Documento  Documento[]
  Documento  Documento[]
}
