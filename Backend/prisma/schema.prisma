// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = "file:./dev.db"
}

model Usuario {
  id         Int          @id @default(autoincrement())
  nome       String
  senha      String
  Financeiro Financeiro[]
  Fin_pago   Fin_pago[]
  Documento  Documento[]
}

model Conta {
  id_conta Int     @id
  nome     String
  Saldo    Decimal
}

model Produto {
  id_produto Int        @id
  cod_barras String
  descricao  String
  valor_v    Decimal
  valor_c    Decimal
  estoque    Int
  docItens   docItens[]
}

model Documento {
  doc_controle    Int          @id @default(autoincrement())
  usuarioId       Int
  id_cliente      Int
  // Pag_id       Int
  //  saida        Boolean      @default(true)
  //  data         DateTime     @default(now())
  valor           Decimal
  descricao       String
  Financeiro      Financeiro[]
  user            Usuario      @relation(fields: [usuarioId], references: [id])
  //forma_pag    forma_pag    @relation(fields: [Pag_id], references: [pag_id])
  forma_pag       forma_pag?   @relation(fields: [forma_pagPag_id], references: [pag_id])
  forma_pagPag_id Int?
}

model docItens {
  item       Int      @id @default(autoincrement())
  Id_produto Int
  data       DateTime
  valor_un   Decimal
  valor_to   Decimal
  quantidade Int
  produto    Produto  @relation(fields: [Id_produto], references: [id_produto])
}

model cliente {
  cliente_id Int    @id @default(autoincrement())
  cpfCnpj    String @unique
  email      String
  nome       String
  telefone   String
  endereco   String
  numero     Int

  Financeiro Financeiro[]
}

model Financeiro {
  fin_id                Int        @id @default(autoincrement())
  Cliente_id            Int
  documentoDoc_controle Int
  usuarioId             Int
  forma_pagPag_id       Int
  dt_create             DateTime   @default(now())
  dt_vencimento         DateTime
  pago                  Boolean    @default(false)
  cancelado             Boolean    @default(false)
  valor                 Decimal
  documento             Documento  @relation(fields: [documentoDoc_controle], references: [doc_controle])
  user                  Usuario    @relation(fields: [usuarioId], references: [id])
  cliente               cliente    @relation(fields: [Cliente_id], references: [cliente_id])
  forma_pag             forma_pag  @relation(fields: [forma_pagPag_id], references: [pag_id])
  Fin_pago              Fin_pago[]
}

model forma_pag {
  pag_id     Int          @id @default(autoincrement())
  prazo      Boolean      @default(false)
  descricao  String
  Financeiro Financeiro[]
  Documento  Documento[]
}

model Fin_pago {
  pago_id    Int        @id @default(autoincrement())
  Fin_id     Int
  usuarioId  Int
  dt_pago    DateTime   @default(now())
  val_desc   Decimal
  val_juros  Decimal
  financeiro Financeiro @relation(fields: [Fin_id], references: [fin_id])
  user       Usuario    @relation(fields: [usuarioId], references: [id])
}
